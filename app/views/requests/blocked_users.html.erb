<%= stylesheet_link_tag "blocks"%>

<% if @blocked_users.count == 0 %>
    <h1><em><strong>You have not blocked any uers, Go ahead and block the haters ðŸ˜‰</strong></em></h1>
<%else%>
    <% @blocked_users.each do |user|%>
        <%= render partial:"blocked_user", locals: {user: user} %>
    <% end %>
<% end %>

<script>
    $(function () {
        $("button.unblock-btn").on("click", function (event) {
            const userID = $(event.target).attr("data-user-id");

            $.ajax({
                type: "post",
                url: `http://localhost:3000/requests/${userID}/unblock`,
                success: function (response) {
                    $(event.target).closest("div.grand-parent").remove();
                }
            });
            event.stopPropagation();
            event.stopImmediatePropagation();
        });
    });
</script>